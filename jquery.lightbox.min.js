/*!
 * jquery.lightbox.js
 * https://github.com/duncanmcdougall/Responsive-Lightbox
 * Copyright 2013 Duncan McDougall and other contributors; Licensed MIT
 */
(function(a){a.fn.lightbox=function(b){var c={items:[],lightbox:null,image:null,margin:50,current:null,locked:false,init:function(d){c.items=d;if(!c.lightbox){a("body").append('<div id="lightbox" style="display:none;"> <a href="#" class="close-lightbox">Close</a><div class="lightbox-nav"><a href="#" class="lightbox-previous">previous</a><a href="#" class="lightbox-next">next</a></div></div>');c.lightbox=a("#lightbox")}if(c.items.length>1){a(".lightbox-next",c.lightbox).show();a(".lightbox-previous",c.lightbox).show()}else{a(".lightbox-next",c.lightbox).hide();a(".lightbox-previous",c.lightbox).hide()}c.bindEvents()},loadImage:function(){a("body").addClass("blurred");a("img",c.lightbox).remove();c.lightbox.fadeIn("fast").append('<span class="lightbox-loading"></span>');var d=a('<img src="'+a(c.current).attr("href")+'" draggable="false">');a(d).load(function(){a(".lightbox-loading").remove();c.lightbox.append(d);c.image=a("img",c.lightbox);c.image.hide();c.resizeImage()})},resizeImage:function(){var f,e,d,h,g;e=a(window).height()-c.margin;d=a(window).outerWidth(true)-c.margin;c.image.width("");c.image.height("");h=c.image.height();g=c.image.width();if(g>d){f=d/g;g=d;h=Math.round(h*f)}if(h>e){f=e/h;h=e;g=Math.round(g*f)}c.image.width(g).height(h);c.image.css({top:(a(window).height()-c.image.outerHeight())/2+"px",left:(a(window).width()-c.image.outerWidth())/2+"px"});c.image.show();c.locked=false},getCurrentIndex:function(){return a.inArray(c.current,c.items)},next:function(){if(c.locked){return false}c.locked=true;if(c.getCurrentIndex()>=c.items.length-1){c.items[0].click()}else{c.items[c.getCurrentIndex()+1].click()}},previous:function(){if(c.locked){return false}c.locked=true;if(c.getCurrentIndex()<=0){c.items[c.items.length-1].click()}else{c.items[c.getCurrentIndex()-1].click()}},bindEvents:function(){a(c.items).click(function(f){var d=a(this)[0];f.preventDefault();c.current=d;c.loadImage();a(document).on("keydown",function(g){if(g.keyCode===27){c.close()}if(g.keyCode===39){c.next()}if(g.keyCode===37){c.previous()}})});c.lightbox.on("click",function(d){if(this===d.target){c.close()}});a(c.lightbox).on("click",".lightbox-previous",function(){c.previous();return false});a(c.lightbox).on("click",".lightbox-next",function(){c.next();return false});a(c.lightbox).on("click",".close-lightbox",function(){c.close();return false});a(window).resize(function(){if(!c.image){return}c.resizeImage()})},close:function(){a(document).off("keydown");a("#lightbox").fadeOut("fast",function(){});a("body").removeClass("blurred")}};a.extend(c,b);c.init(this)}})(jQuery);